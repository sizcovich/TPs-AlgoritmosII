\documentclass[10pt, a4paper]{article}
\usepackage[paper=a4paper, left=1.5cm, right=1.5cm, bottom=1.5cm, top=3.5cm]{geometry}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{indentfirst}
\usepackage{fancyhdr}
\usepackage{latexsym}
\usepackage{lastpage}
\usepackage{libs/caratula}
\usepackage{libs/aed2-symb,libs/aed2-itef,libs/aed2-tad}
\usepackage[colorlinks=true, linkcolor=blue]{hyperref}
\usepackage{calc}

\newcommand{\f}[1]{\text{#1}}
\renewcommand{\paratodo}[2]{$\forall~#2$: #1}

\sloppy

\hypersetup{%
 % Para que el PDF se abra a p\'agina completa.
 pdfstartview= {FitH \hypercalcbp{\paperheight-\topmargin-1in-\headheight}},
 pdfauthor={C\'atedra de Algoritmos y Estructuras de Datos II - DC - UBA},
 pdfkeywords={TADs b\'asicos},
 pdfsubject={Tipos abstractos de datos b\'asicos}
}

\parskip=5pt % 10pt es el tamaño de fuente

% Pongo en 0 la distancia extra entre ítemes.
\let\olditemize\itemize
\def\itemize{\olditemize\itemsep=0pt}

% Acomodo fancyhdr.
\pagestyle{fancy}
\thispagestyle{fancy}
\addtolength{\headheight}{1pt}
\lhead{Algoritmos y Estructuras de Datos II}
\rhead{$2^{\mathrm{do}}$ cuatrimestre de 2012}
\cfoot{\thepage /\pageref{LastPage}}
\renewcommand{\footrulewidth}{0.4pt}

\author{Algoritmos y Estructuras de Datos II, DC, UBA.}
\date{}
\title{Tipos abstractos de datos b\'asicos}

\begin{document}

\materia{Algoritmos y Estructuras de Datos II}
\submateria{Tipos abstractos de datos b\'asicos}
\titulo{LinkLinkIt}
\subtitulo{Cat\'alogo de rutas en internet}
\grupo{3}
\integrante{Barabas, Ariel}{775/11}{ariel.baras@gmail.com}
\integrante{Izcovich, Sabrina}{550/11}{sizcovich@gmail.com}
\integrante{Otero, Fernando}{424/11}{fergabot@gmail.com}
\integrante{Vita, Sebasti\'an}{149/11}{sebastian\_vita@yahoo.com.ar}

%Pagina de titulo e indice
\thispagestyle{empty}

\maketitle
\tableofcontents

\newpage

%TADS
\section{Alias}

\tad{\tadNombre{Link} ES \tadNombre{string}}
\tad{\tadNombre{Nombre} ES \tadNombre{string}}
\tad{\tadNombre{Fecha} ES \tadNombre{nat}}


\section{TAD \tadNombre{ARBOL DE CATEGORIAS}}

\begin{tad}{\tadNombre{ARBOL DE CATEGORIAS}}
\tadGeneros{abCat}
\tadExporta{abCat, generadores, observadores b\'asicos, todasLasCategorias}
\tadUsa{\tadNombre{Nombre, Bool, Conj(\alpha) }}

\tadIgualdadObservacional{a_{1}}{a_{2}}{abCat}{( categoria($a_{1}$) $=_{obs}$ categoria($a_{2}$)) $\land$ (subcategorias($a_{1}$) $=_{obs}$
subcategorias($a_{2}$))}


\tadObservadores
\tadAlinearFunciones{todasLasCategorias}{nombre n,conj(abCat)\ ca}
\tadOperacion{subcategorias}{abCat}{conj(abCat)}{}
\tadOperacion{categoria}{abCat}{nombre}{}


\tadGeneradores
\tadOperacion{nodo}{nombre \ n,conj(abCat)\ ca}{abCat}{nombreUnico(n, ca)}


\tadOtrasOperaciones
\tadOperacion{nombreUnico}{nombre,conj(abCat)}{bool}{}
\tadOperacion{sacarNombres}{conj(abCat)}{conj(nombre)}{}
\tadOperacion{todasLasCategorias}{abCat}{conj(nombre)}{}

\tadAxiomas 
$\forall$ a: abCat, $\forall$ n: nombre, $\forall$ ca: conj(abCat)
\tadAlinearAxiomas{todasLasCategorias(nodo(n, ca))}
\tadAxioma{categoria(nodo(n, conj(a)))}{n}
\tadAxioma{subcategorias(nodo(n, conj(a)))}{conj(a)}
\tadAxioma{nombreUnico(n, ca)}{$\neg$(n $\in$ sacarNombres(ca))}
\tadAxioma{sacarNombres(ca)}{if $\emptyset$?(ca) then $\emptyset$ else todasLasCategorias(dameUno(ca)) $\cup$ sacarNombres(sinUno(ca))}
\tadAxioma{todasLasCategorias(nodo(n, ca))}{Ag(n, sacarNombres (ca))}

\end{tad}


\section{TAD \tadNombre{SISTEMA}}

\begin{tad}{\tadNombre{SISTEMA}}
\tadGeneros{sist}
\tadExporta{sist, generadores, observadores b\'asicos, AccesosRecientes}
\tadUsa{\tadNombre{Fecha, Link, Nombre, Arbol de categorias, Nat, Bool, Conj(\alpha)}}

\tadIgualdadObservacional{s_{1}}{s_{2}}{sistema}{(arbol($s_{1}$) $=_{obs}$ arbol($s_{2}$)) $\land$(todosLosLinks($s_{1}$) $=_{obs}$ todosLosLinks($s_{2}$)) $\land_{L}$
 (($\forall$ l:link $\in$ todosLosLinks($s_{1}$))visitasDeHoy(l, $s_{1}$, $s_{1}$) $=_{obs}$ visitasDeHoy(l, $s_{2}$, $s_{2}$)$\land$ visitasDeAyer(l, $s_{1}$, $s_{1}$) $=_{obs}$ visitasDeAyer(l, $s_{2}$, $s_{2}$)$\land$ visitasDeAntesdeayer(l, $s_{1}$, $s_{1}$) $=_{obs}$ visitasDeAntesdeayer(l, $s_{2}$, $s_{2}$)) $\land_{L}$
(($\forall$ l:link $\in$ todosLosLinks($s_{1}$))categoria(l, $s_{1}$) $=_{obs}$ categoria(l, $s_{2}$))}


\tadObservadores
\tadAlinearFunciones{registrarAcceso}{link l,nombre n,sist s}
\tadOperacion{arbol}{sist}{abCat}{}
\tadOperacion{todosLosLinks}{sist}{conj(link)}{}
\tadOperacion{visitasDeHoy}{link,sist \ s, sist \ s'}{conj(fecha)}{s = s'}
\tadOperacion{visitasDeAyer}{link,sist \ s, sist \ s'}{conj(fecha)}{s = s'}
\tadOperacion{visitasDeAntesdeayer}{link,sist \ s, sist \ s'}{conj(fecha)}{s = s'}
\tadOperacion{categoria}{link \ l,sist \ s}{nombre}{linkEnSist(l, s)}


\tadGeneradores
\tadOperacion{inicio}{abCat}{sist}{}
\tadOperacion{registrarLink}{link \ l,nombre \ n,sist \ s}{sist}{linkUnico(l, s) $\land$ nombreEnSist(n, s)}
\tadOperacion{registrarAcceso}{fecha,link \ l,sist \ s}{sist}{linkEnSist(l, s)}


\tadOtrasOperaciones
\tadOperacion{linkUnico}{link,sist}{bool}{}
\tadOperacion{nombreEnSist}{nombre,sist}{bool}{}
\tadOperacion{linkEnSist}{link,sist}{bool}{}
\tadOperacion{ultimoAcceso}{sist}{nat}{}
\tadOperacion{AccesosRecientes}{link, sist}{nat}{linkEnSist}

\tadAxiomas
$\forall$ a: abCat, $\forall$ f: fecha, $\forall$ l,l': link, $\forall$ s,s': sist, $\forall$ n,n': nombre 
\tadAlinearAxiomas{nombreEnSist(n, registrarAcceso(f, l, s))}
\tadAxioma{todosLosLinks(inicio(a))}{$\emptyset$}
\tadAxioma{todosLosLinks(registrarAcceso(f, l, s))}{todosLosLinks(s)}
\tadAxioma{todosLosLinks(registrarLink(l, n, s))}{Ag(l, todosLosLinks(s))}
\tadAxioma{visitasDeHoy(l, inicio(a), s')}{$\emptyset$}
\tadAxioma{visitasDeHoy(l, registrarAcceso(f, l', s), s')}{if (l = l' $\land$ ultimoAcceso(s') = f) then Ag(f, visitasDeHoy(l , s, s')) else visitasDeHoy (l, s, s') fi} %como escribimos los if?
\tadAxioma{visitasDeHoy(l, registrarLink(l', n, s), s')}{visitasDeHoy(l, s, s')}
\tadAxioma{visitasDeAyer(l, inicio(a), s')}{$\emptyset$}
\tadAxioma{visitasDeAyer(l, registrarAcceso(f, l', s), s')}{if (l = l' $\land$ (ultimoAcceso(s')- 1) = f) then Ag(f, visitasDeAyer(l , s, s')) else visitasDeAyer (l, s, s') fi} %como escribimos los if?
\tadAxioma{visitasDeAyer(l, registrarLink(l', n, s), s')}{visitasDeAyer(l, s, s')}
\tadAxioma{visitasDeAntesdeayer(l, inicio(a), s')}{$\emptyset$}
\tadAxioma{visitasDeAntesdeayer(l, registrarAcceso(f, l', s), s')}{if (l = l' $\land$ (ultimoAcceso(s')- 2) = f) then Ag(f, visitasDeAntesdeayer(l , s, s')) else visitasDeAntesdeayer (l, s, s') fi} %como escribimos los if?
\tadAxioma{visitasDeAntesdeayer(l, registrarLink(l', n, s), s')}{visitasDeAntesdeayer(l, s, s')}
\tadAxioma{categoria(l, registrarAcceso(f, l', s))}{categoria (l, s)}
\tadAxioma{categoria(l, registrarLink(l', n, s))}{if (l = l') then n else categoria (l, s) fi}
\tadAxioma{arbol(inicio(a))}{a}
\tadAxioma{arbol(registrarAcceso(f, l, s))}{arbol(s)}
\tadAxioma{arbol(registrarLink(l, n, s))}{arbol(s)}
\tadAxioma{linkUnico(l, inicio(a))}{true}
\tadAxioma{linkUnico(l, registrarAcceso(f, l', s))}{linkUnico(l, s)}
\tadAxioma{linkUnico(l, registrarLink(l', n, s))}{if (l = l') then false else linkUnico(l, s) fi}
\tadAxioma{nombreEnSist(n, inicio(a))}{$\neg$(n $\in$ todasLasCategorias(a))}
\tadAxioma{nombreEnSist(n, registrarAcceso(f, l, s))}{nombreEnSist(n, s)}
\tadAxioma{nombreEnSist(n, registrarLink(l, n', s))}{nombreEnSist(n, s)}
\tadAxioma{linkEnSist(l, inicio(a))}{false}
\tadAxioma{linkEnSist(l, registrarAcceso(f, l', s))}{linkEnSist(l, s)}
\tadAxioma{linkEnSist(l, registrarLink(l', n, s))}{if (l = l') then true else linkEnSist(l, s) fi}
\tadAxioma{ultimoAcceso(inicio(a))}{0}
\tadAxioma{ultimoAcceso(registrarAcceso(f, l, s))}{if (f $>$ ultimoAcceso (s)) then f else ultimoAcceso (s) fi}
\tadAxioma{ultimoAcceso(registrarLink(l, n, s))}{ultimoAcceso (s)}
\tadAxioma{AccesosRecientes(l, s)}{\#visitasDeHoy(l, s, s) $+$ \#visitasDeAyer(l, s, s) $+$ \#visitasDeAntesdeayer(l, s, s)}

\end{tad}

\end{document}